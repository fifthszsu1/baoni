# Flask英文文本解析与XMind生成服务 - 实施步骤

## 项目概述
创建一个Flask web服务，能够接收英文文本，使用Azure OpenAI分析其主要思想，并生成XMind思维导图文件。

## 核心功能
1. **文本接收**: 通过RESTful API接收英文文本输入
2. **AI分析**: 使用Azure OpenAI GPT模型分析文本主要思想
3. **格式转换**: 将分析结果转换为markdown格式
4. **思维导图生成**: 生成XMind格式的思维导图文件
5. **文档化**: 集成Swagger UI提供API文档

## 技术栈
- **后端框架**: Flask
- **API文档**: Flask-RESTX (Swagger UI)
- **AI服务**: Azure OpenAI
- **思维导图**: xmind库
- **配置管理**: python-dotenv

## 详细实施步骤

### 步骤1: 项目基础架构
- 创建Flask应用主文件
- 设置项目目录结构
- 创建配置文件(.env)
- 创建依赖管理文件(requirements.txt)

### 步骤2: Flask应用配置
- 初始化Flask应用
- 配置CORS支持
- 集成Flask-RESTX实现Swagger UI
- 设置错误处理机制

### 步骤3: Azure OpenAI集成
- 配置Azure OpenAI客户端
- 创建文本分析服务类
- 实现提示词工程，专门用于分析英文阅读理解文章
- 处理API调用异常

### 步骤4: 核心API接口
- 创建POST接口 `/api/analyze-text`
- 实现输入验证
- 调用Azure OpenAI分析文本
- 返回分析结果

### 步骤5: XMind文件生成
- 安装和配置xmind库
- 解析markdown格式的分析结果  
- 构建思维导图结构
- 生成并保存XMind文件
- 提供文件下载接口

### 步骤6: API文档和测试
- 完善Swagger API文档
- 添加请求/响应示例
- 创建测试用例
- 错误处理优化

### 步骤7: 部署准备
- 创建启动脚本
- 添加日志记录
- 性能优化配置
- 文档完善

## Azure OpenAI配置信息
```
AZURE_OPENAI_API_KEY=你的Azure OpenAI密钥
AZURE_OPENAI_ENDPOINT=https://your-endpoint.openai.azure.com/
AZURE_DEPLOYMENT_NAME=gpt-4
AZURE_API_VERSION=2025-01-01-preview
```

## 预期输入输出
- **输入**: 英文文本(高中阅读理解文章)
- **输出**: 
  - 文本主要思想的markdown分析
  - XMind思维导图文件
  - 分析结果的结构化数据

## 项目文件结构
```
baoni/
├── app.py              # Flask主应用
├── config.py           # 配置文件
├── services/
│   ├── __init__.py
│   ├── openai_service.py    # Azure OpenAI服务
│   └── xmind_service.py     # XMind生成服务
├── routes/
│   ├── __init__.py
│   └── api_routes.py        # API路由
├── utils/
│   ├── __init__.py
│   └── helpers.py           # 工具函数
├── static/                  # 静态文件
├── templates/              # HTML模板
├── uploads/                # 生成的文件存储
├── .env                    # 环境变量
├── requirements.txt        # 依赖包
└── README.md              # 项目说明
``` 